<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home Page</title>
  <link rel="stylesheet" href="output.css">
</head>

<body>
  <header class="intro">
    <div class="text-3xl text-center max-sm:text-xl">Hi, My name is Melvin Yew.</div>
    <div class="text-md text-center max-sm:text-sm text-gray-400">Want to know more about me? You can read my articles
      <a href="./articles"><span class="text-blue-600">here</span></a>.
    </div>
  </header>

  <main class="container w-10/12 grid grid-cols-12 gap-x-1 gap-y-4 justify-items-center">
    <div
      class="cursor-pointer bg-slate-100 border rounded-xl w-96 h-54 object-cover overflow-hidden col-span-4 max-xl:w-80 max-xl:h-50 max-lg:col-span-6 max-md:col-span-12">
      <video loop class="preview_video" preload="auto">
        <source src="./img/001.mp4" type="video/mp4">Your browser does not support the video tag.
      </video>
    </div>
    <div
      class="cursor-pointer bg-slate-100 border rounded-xl w-96 h-60 object-cover overflow-hidden col-span-4 max-xl:w-80 max-xl:h-50 max-lg:col-span-6 max-md:col-span-12">
      <video loop class="preview_video" preload="auto">
        <source src="./img/002.mp4" type="video/mp4">Your browser does not support the video tag.
      </video>
    </div>
    <div
      class="cursor-pointer bg-slate-100 border rounded-xl w-96 h-60 object-cover overflow-hidden col-span-4 max-xl:w-80 max-xl:h-50 max-lg:col-span-6 max-md:col-span-12">
      <video loop class="preview_video" preload="auto">
        <source src="./img/003.mp4" type="video/mp4">Your browser does not support the video tag.
      </video>
    </div>
    <div
      class="cursor-pointer bg-slate-100 border rounded-xl w-96 h-60 object-cover overflow-hidden col-span-4 max-xl:w-80 max-xl:h-50 max-lg:col-span-6 max-md:col-span-12">
      <video loop class="preview_video" preload="auto">
        <source src="./img/004.mp4" type="video/mp4">Your browser does not support the video tag.
      </video>
    </div>
    <div
      class="cursor-pointer bg-slate-100 border rounded-xl w-96 h-60 object-cover overflow-hidden col-span-4 max-xl:w-80 max-xl:h-50 max-lg:col-span-6 max-md:col-span-12">
      <video loop class="preview_video" preload="auto">
        <source src="./img/005.mp4" type="video/mp4">Your browser does not support the video tag.
      </video>
    </div>
    <div
      class="cursor-pointer bg-slate-100 border rounded-xl w-96 h-60 object-cover overflow-hidden col-span-4 max-xl:w-80 max-xl:h-50 max-lg:col-span-6 max-md:col-span-12">
      <video loop class="preview_video" preload="auto">
        <source src="./img/006.mp4" type="video/mp4">Your browser does not support the video tag.
      </video>
    </div>
    <div
      class="cursor-pointer bg-slate-100 border rounded-xl w-96 h-60 object-cover overflow-hidden col-span-4 max-xl:w-80 max-xl:h-50 max-lg:col-span-6 max-md:col-span-12">
      <video loop class="preview_video" preload="auto">
        <source src="./img/007.mp4" type="video/mp4">Your browser does not support the video tag.
      </video>
    </div>
    <div
      class="cursor-pointer bg-slate-100 border rounded-xl w-96 h-60 object-cover overflow-hidden col-span-4 max-xl:w-80 max-xl:h-50 max-lg:col-span-6 max-md:col-span-12">
      <video loop class="preview_video" preload="auto">
        <source src="./img/008.mp4" type="video/mp4">Your browser does not support the video tag.
      </video>
    </div>
  </main>
  <footer class="mt-12 mb-6">Made with ðŸ’š</footer>
  <script>
    // VIDEO PLAY
    let videos = document.getElementsByClassName('preview_video')
    function startPreview(video) {
      video.muted = true;
      // video play state (without react XD)
      if (!video.storedTime) {
        video.currentTime = 0;
        video.storedTime = video.currentTime;
      } else {
        video.currentTime = video.storedTime;
      }
      video.playbackRate = 1;
      video.play();
    }

    function stopPreview(video) {
      video.storedTime = video.currentTime
      video.pause();
    }

    let previewTimeout = null;

    for (let i = 0; i < videos.length; i++) {
      const video = videos[i];
      console.log(video)
      video.addEventListener("mouseenter", () => {
        startPreview(video);
        // previewTimeout = setTimeout(stopPreview, 4000);
      });

      video.addEventListener("mouseleave", () => {
        // clearTimeout(previewTimeout);
        // previewTimeout = null;
        stopPreview(video);
      });

      video.addEventListener('click', () => {
        switch (i) {
          case 0:
          case 1:
          case 2:
          case 3:
          case 4:
          case 5:
            window.location.href = `./tricks/${i + 1}`
            break;
          case 6:
            window.location.href = `./projects/fromsoftware`
            break;
          case 7:
            window.location.href = `./projects/uzi`
            break;
          default:
            break;
        }
      })
    }

    // DEBUG CODE
    // let cards = document.getElementsByClassName('card')
    // for (card of cards) {
    //   tag = document.createElement('div')
    //   tag.className = 'video-tag'
    //   const vidRe = /\.\/img\/(....mp4)/i
    //   let result = vidRe.exec(card.innerHTML)
    //   if (result !== null) {
    //     vidStr = result[1]
    //     tag.innerText = vidStr
    //     card.appendChild(tag)
    //   }
    // }
  </script>
</body>


</html>